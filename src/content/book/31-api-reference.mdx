This chapter provides comprehensive documentation for the prompts.chat REST API.

## Authentication

### API Key

Include your API key in request headers:

```bash
Authorization: Bearer your-api-key
# or
X-API-Key: your-api-key
# or
PROMPTS-API-KEY: your-api-key
```

### Getting an API Key

1. Log into prompts.chat
2. Go to Settings â†’ API
3. Click "Generate New API Key"
4. Copy and store securely (shown only once)

## Base URL

```
Production: https://prompts.chat/api
Self-hosted: https://your-instance.com/api
```

## Endpoints

### Prompts

#### List Prompts

```http
GET /api/prompts
```

Query parameters:
| Parameter | Type | Description |
|-----------|------|-------------|
| page | number | Page number (default: 1) |
| limit | number | Items per page (default: 20, max: 100) |
| category | string | Filter by category slug |
| tag | string | Filter by tag slug |
| type | string | Filter by type (TEXT, STRUCTURED, IMAGE, etc.) |
| search | string | Search query |
| sort | string | Sort by: recent, popular, trending |

Response:
```json
{
  "prompts": [
    {
      "id": "abc123",
      "slug": "python-code-reviewer",
      "title": "Python Code Reviewer",
      "description": "Reviews Python code for best practices",
      "type": "TEXT",
      "author": {
        "id": "user123",
        "username": "developer",
        "name": "John Developer",
        "avatar": "https://..."
      },
      "category": {
        "id": "cat123",
        "name": "Development",
        "slug": "development"
      },
      "tags": [
        { "id": "tag1", "name": "Python", "slug": "python" }
      ],
      "votes": 42,
      "createdAt": "2024-01-15T10:30:00Z",
      "updatedAt": "2024-01-20T15:45:00Z"
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 20,
    "total": 150,
    "pages": 8
  }
}
```

#### Get Prompt

```http
GET /api/prompts/:id
```

Response:
```json
{
  "id": "abc123",
  "slug": "python-code-reviewer",
  "title": "Python Code Reviewer",
  "description": "Reviews Python code for best practices",
  "content": "You are an expert Python developer...",
  "type": "TEXT",
  "structuredFormat": null,
  "isPrivate": false,
  "author": { ... },
  "category": { ... },
  "tags": [ ... ],
  "votes": 42,
  "versions": [
    {
      "id": "v1",
      "version": 1,
      "content": "...",
      "changeNote": "Initial version",
      "createdAt": "2024-01-15T10:30:00Z"
    }
  ],
  "createdAt": "2024-01-15T10:30:00Z",
  "updatedAt": "2024-01-20T15:45:00Z"
}
```

#### Create Prompt

```http
POST /api/prompts
```

Request body:
```json
{
  "title": "My New Prompt",
  "content": "You are a helpful assistant...",
  "description": "A helpful assistant prompt",
  "type": "TEXT",
  "structuredFormat": null,
  "categoryId": "cat123",
  "tagIds": ["tag1", "tag2"],
  "isPrivate": false
}
```

Response: Created prompt object

#### Update Prompt

```http
PUT /api/prompts/:id
```

Request body: Same as create (partial updates supported)

Response: Updated prompt object

#### Delete Prompt

```http
DELETE /api/prompts/:id
```

Response:
```json
{
  "success": true,
  "message": "Prompt deleted"
}
```

### Search

#### Semantic Search

```http
GET /api/search
```

Query parameters:
| Parameter | Type | Description |
|-----------|------|-------------|
| q | string | Search query (required) |
| limit | number | Max results (default: 10) |
| type | string | Filter by type |
| category | string | Filter by category |

Response:
```json
{
  "results": [
    {
      "id": "abc123",
      "title": "Python Code Reviewer",
      "description": "...",
      "score": 0.95,
      "type": "TEXT"
    }
  ],
  "query": "python code review",
  "total": 5
}
```

### Categories

#### List Categories

```http
GET /api/categories
```

Response:
```json
{
  "categories": [
    {
      "id": "cat123",
      "name": "Development",
      "slug": "development",
      "description": "Programming and development prompts",
      "promptCount": 45,
      "children": [
        {
          "id": "cat124",
          "name": "Code Review",
          "slug": "code-review",
          "promptCount": 12
        }
      ]
    }
  ]
}
```

### Tags

#### List Tags

```http
GET /api/tags
```

Query parameters:
| Parameter | Type | Description |
|-----------|------|-------------|
| limit | number | Max tags to return |
| sort | string | Sort by: popular, alphabetical |

Response:
```json
{
  "tags": [
    {
      "id": "tag1",
      "name": "Python",
      "slug": "python",
      "color": "#3776AB",
      "promptCount": 28
    }
  ]
}
```

### User

#### Get Current User

```http
GET /api/user/me
```

Response:
```json
{
  "id": "user123",
  "username": "developer",
  "name": "John Developer",
  "email": "john@example.com",
  "avatar": "https://...",
  "bio": "Software developer and prompt engineer",
  "createdAt": "2023-06-15T...",
  "stats": {
    "prompts": 15,
    "votes": 142,
    "collections": 5
  }
}
```

#### Get User Profile

```http
GET /api/users/:username
```

Response: Public user profile

#### Get User's Prompts

```http
GET /api/users/:username/prompts
```

Response: Paginated list of user's public prompts

### Collections

#### List My Collections

```http
GET /api/collections
```

Response:
```json
{
  "collections": [
    {
      "promptId": "abc123",
      "prompt": { ... },
      "addedAt": "2024-01-20T..."
    }
  ]
}
```

#### Add to Collection

```http
POST /api/collections/:promptId
```

Response:
```json
{
  "success": true,
  "message": "Added to collection"
}
```

#### Remove from Collection

```http
DELETE /api/collections/:promptId
```

### Votes

#### Vote on Prompt

```http
POST /api/prompts/:id/vote
```

Response:
```json
{
  "success": true,
  "votes": 43
}
```

#### Remove Vote

```http
DELETE /api/prompts/:id/vote
```

### Improve Prompt

#### Enhance a Prompt

```http
POST /api/improve-prompt
```

Request body:
```json
{
  "prompt": "Help me write better code",
  "outputType": "text",
  "outputFormat": "text"
}
```

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| prompt | string | Yes | Basic prompt to improve |
| outputType | string | No | text, image, video, sound |
| outputFormat | string | No | text, structured_json, structured_yaml |

Response:
```json
{
  "original": "Help me write better code",
  "improved": "You are an expert software engineer...",
  "outputType": "text",
  "outputFormat": "text",
  "inspirations": [
    {
      "id": "abc123",
      "slug": "code-mentor",
      "title": "Code Mentor",
      "similarity": 85
    }
  ],
  "model": "gpt-4"
}
```

## MCP Endpoint

### MCP Server

```http
POST /api/mcp
```

The MCP endpoint implements the Model Context Protocol. See the MCP Integration chapter for details.

Query parameters for filtering:
```
/api/mcp?categories=development,writing
/api/mcp?tags=python,typescript
/api/mcp?users=username1,username2
```

## Error Handling

### Error Response Format

```json
{
  "error": "Error message",
  "code": "ERROR_CODE",
  "details": { ... }
}
```

### HTTP Status Codes

| Code | Meaning |
|------|---------|
| 200 | Success |
| 201 | Created |
| 400 | Bad Request |
| 401 | Unauthorized |
| 403 | Forbidden |
| 404 | Not Found |
| 429 | Rate Limited |
| 500 | Server Error |

### Common Error Codes

| Code | Description |
|------|-------------|
| UNAUTHORIZED | Missing or invalid API key |
| FORBIDDEN | Not allowed to access resource |
| NOT_FOUND | Resource doesn't exist |
| VALIDATION_ERROR | Invalid request data |
| RATE_LIMITED | Too many requests |

## Rate Limiting

| Endpoint | Limit |
|----------|-------|
| Read operations | 100 requests/minute |
| Write operations | 20 requests/minute |
| Search | 30 requests/minute |
| Improve prompt | 10 requests/minute |

Rate limit headers:
```
X-RateLimit-Limit: 100
X-RateLimit-Remaining: 95
X-RateLimit-Reset: 1704067200
```

## SDK Usage

### JavaScript/TypeScript

```typescript
import { PromptsClient } from 'prompts.chat';

const client = new PromptsClient({
  apiKey: 'your-api-key',
  baseUrl: 'https://prompts.chat'  // Optional for self-hosted
});

// List prompts
const prompts = await client.prompts.list({
  category: 'development',
  limit: 10
});

// Get prompt
const prompt = await client.prompts.get('abc123');

// Create prompt
const newPrompt = await client.prompts.create({
  title: 'My Prompt',
  content: '...'
});

// Search
const results = await client.search('python code review');

// Improve
const improved = await client.prompts.improve({
  prompt: 'Help with code',
  outputType: 'text'
});
```

### Python

```python
from prompts_chat import PromptsClient

client = PromptsClient(api_key='your-api-key')

# List prompts
prompts = client.prompts.list(category='development', limit=10)

# Get prompt
prompt = client.prompts.get('abc123')

# Create prompt
new_prompt = client.prompts.create(
    title='My Prompt',
    content='...'
)
```

## Webhooks (Coming Soon)

Subscribe to events:
- `prompt.created`
- `prompt.updated`
- `prompt.deleted`
- `prompt.voted`

## Summary

The prompts.chat API provides:
- Full CRUD for prompts
- Search and discovery
- User management
- Collections and voting
- AI-powered prompt improvement
- MCP integration

For the latest API updates, check the [API documentation](https://prompts.chat/docs/api).
