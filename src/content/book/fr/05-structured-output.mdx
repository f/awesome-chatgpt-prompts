Obtenir des sorties coh√©rentes et bien format√©es est essentiel pour les applications de production et les workflows efficaces. Ce chapitre couvre les techniques pour contr√¥ler exactement comment les mod√®les d'IA formatent leurs r√©ponses.

<Callout type="info" title="De la Prose aux Donn√©es">
Les sorties structur√©es transforment les r√©ponses de l'IA de texte libre en donn√©es actionnables et analysables.
</Callout>

## Pourquoi la Structure Est Importante

<StructuredOutputDemo />

## Techniques de Formatage de Base

### Listes

Les listes sont parfaites pour les instructions √©tape par √©tape, les √©l√©ments class√©s ou les collections de points connexes. Elles sont faciles √† scanner et √† analyser. Utilisez des **listes num√©rot√©es** quand l'ordre compte (√©tapes, classements) et des **puces** pour les collections non ordonn√©es.

<TryIt 
  compact
  title="Formatage en Liste"
  prompt={`Donne 5 conseils pour mieux dormir.

Format : Liste num√©rot√©e avec une br√®ve explication pour chaque.
Chaque conseil doit √™tre en gras, suivi d'un tiret et de l'explication.`}
/>

<Callout type="tip" title="Bonnes Pratiques pour les Listes">
Sp√©cifiez le nombre exact d'√©l√©ments souhait√©s, s'il faut inclure des explications, et si les √©l√©ments doivent √™tre en gras ou avoir une structure sp√©cifique.
</Callout>

### Tableaux

Les tableaux excellent pour comparer plusieurs √©l√©ments selon les m√™mes dimensions. Ils sont id√©aux pour les comparaisons de fonctionnalit√©s, les r√©sum√©s de donn√©es et toute information avec des attributs coh√©rents. D√©finissez toujours explicitement vos en-t√™tes de colonnes.

<TryIt 
  compact
  title="Formatage en Tableau"
  prompt={`Compare les 4 principaux frameworks web Python.

Formate comme un tableau markdown avec les colonnes :
| Framework | Id√©al Pour | Courbe d'Apprentissage | Performance |`}
/>

<Callout type="tip" title="Bonnes Pratiques pour les Tableaux">
Sp√©cifiez les noms de colonnes, les types de donn√©es attendus (texte, nombres, notes), et combien de lignes vous avez besoin. Pour les comparaisons complexes, limitez √† 4-6 colonnes pour la lisibilit√©.
</Callout>

### En-t√™tes et Sections

Les en-t√™tes cr√©ent une structure de document claire, rendant les longues r√©ponses scannables et organis√©es. Utilisez-les pour les rapports, analyses ou toute r√©ponse multi-parties. Les en-t√™tes hi√©rarchiques (##, ###) montrent les relations entre les sections.

```
Analyse cette proposition commerciale.

Structure ta r√©ponse avec ces sections :
## R√©sum√© Ex√©cutif
## Forces
## Faiblesses
## Recommandations
## √âvaluation des Risques
```

<Callout type="tip" title="Bonnes Pratiques pour les Sections">
Listez vos sections dans l'ordre souhait√©. Pour la coh√©rence, sp√©cifiez ce que chaque section doit contenir (ex : ¬´ R√©sum√© Ex√©cutif : 2-3 phrases uniquement ¬ª).
</Callout>

### Emphase avec des Directives en Majuscules

Les mots en majuscules agissent comme des signaux forts pour le mod√®le, soulignant les contraintes ou exigences critiques. Utilisez-les avec parcimonie pour un impact maximum‚Äîl'abus dilue leur efficacit√©.

**Directives en Majuscules Courantes :**

<InfoGrid items={[
  { label: "JAMAIS", description: "Interdiction absolue : \"N'inclus JAMAIS d'opinions personnelles\"", color: "red" },
  { label: "TOUJOURS", description: "Exigence obligatoire : \"Cite TOUJOURS tes sources\"", color: "green" },
  { label: "IMPORTANT", description: "Instruction critique : \"IMPORTANT : Garde les r√©ponses sous 100 mots\"", color: "amber" },
  { label: "NE PAS", description: "Interdiction forte : \"NE PAS inventer de statistiques\"", color: "red" },
  { label: "DOIT", description: "Action requise : \"La sortie DOIT √™tre du JSON valide\"", color: "blue" },
  { label: "UNIQUEMENT", description: "Restriction : \"Retourne UNIQUEMENT le code, pas d'explications\"", color: "purple" },
]} />

```
R√©sume cet article.

IMPORTANT : Garde le r√©sum√© sous 100 mots.
N'ajoute JAMAIS d'information non pr√©sente dans l'original.
Maintiens TOUJOURS le ton et la perspective originaux.
N'inclus PAS tes propres opinions ou analyses.
```

<Callout type="warning" title="Utiliser avec Parcimonie">
Si tout est en majuscules ou marqu√© comme critique, rien ne ressort. R√©servez ces directives pour les contraintes v√©ritablement importantes.
</Callout>

## Sortie JSON

JSON (JavaScript Object Notation) est le format le plus populaire pour les sorties structur√©es d'IA. Il est lisible par les machines, largement support√© par les langages de programmation, et parfait pour les APIs, bases de donn√©es et workflows d'automatisation. La cl√© d'un JSON fiable est de fournir un sch√©ma clair.

### Requ√™te JSON Basique

Commencez avec un template montrant la structure exacte souhait√©e. Incluez les noms de champs, types de donn√©es et valeurs d'exemple. Cela agit comme un contrat que le mod√®le suivra.

<TryIt 
  title="Extraction JSON"
  description="Extraire des donn√©es structur√©es de texte non structur√©."
  prompt={`Extrais les informations de ce texte et retourne en JSON :

{
    "nom_entreprise": "string",
    "annee_fondation": number,
    "siege_social": "string",
    "employes": number,
    "secteur": "string"
}

Texte : "Apple Inc., fond√©e en 1976, a son si√®ge √† Cupertino, Californie. Le g√©ant technologique emploie environ 164 000 personnes dans le monde."`}
/>

### Structures JSON Complexes

Pour les donn√©es imbriqu√©es, utilisez du JSON hi√©rarchique avec des objets dans des objets, des tableaux d'objets et des types mixtes. D√©finissez clairement chaque niveau et utilisez des annotations de style TypeScript (`"positif" | "n√©gatif"`) pour contraindre les valeurs.

```
Analyse cet avis produit et retourne du JSON :

{
  "id_avis": "string (g√©n√©rer unique)",
  "sentiment": {
    "global": "positif" | "n√©gatif" | "mixte" | "neutre",
    "score": 0.0-1.0
  },
  "aspects": [
    {
      "aspect": "string (ex: 'prix', 'qualit√©')",
      "sentiment": "positif" | "n√©gatif" | "neutre",
      "mentions": ["citations exactes de l'avis"]
    }
  ],
  "intention_achat": {
    "recommanderait": boolean,
    "confiance": 0.0-1.0
  },
  "phrases_cles": ["tableau de phrases notables"]
}

Retourne UNIQUEMENT du JSON valide, pas de texte additionnel.

Avis : "[texte de l'avis]"
```

### Assurer un JSON Valide

Les mod√®les ajoutent parfois du texte explicatif ou du formatage markdown autour du JSON. Pr√©venez cela avec des instructions explicites sur le format de sortie. Vous pouvez demander du JSON brut ou du JSON dans des blocs de code‚Äîchoisissez selon vos besoins de parsing.

Ajoutez des instructions explicites :

```
IMPORTANT :
- Retourne UNIQUEMENT l'objet JSON, pas de blocs de code markdown
- Assure-toi que toutes les cha√Ænes sont correctement √©chapp√©es
- Utilise null pour les valeurs manquantes, pas undefined
- V√©rifie que la sortie est du JSON analysable
```

Ou demandez des blocs de code en demandant au mod√®le d'envelopper sa sortie :

````
Retourne le r√©sultat comme un bloc de code JSON :
```json
{ ... }
```
````

## Sortie YAML

YAML est plus lisible que JSON, utilisant l'indentation au lieu des accolades. C'est le standard pour les fichiers de configuration (Docker, Kubernetes, GitHub Actions) et fonctionne bien quand la sortie sera lue par des humains ou utilis√©e dans des contextes DevOps. YAML est sensible √† l'indentation, donc soyez sp√©cifique sur les exigences de formatage.

<TryIt 
  compact
  title="G√©n√©ration YAML"
  prompt={`G√©n√®re un workflow GitHub Actions pour un projet Node.js.

Retourne en YAML valide :
- Inclure : √©tapes install, lint, test, build
- Utiliser Node.js 18
- Mettre en cache les d√©pendances npm
- Ex√©cuter sur push vers main et pull requests`}
/>

## Sortie XML

XML est encore requis pour de nombreux syst√®mes d'entreprise, APIs SOAP et int√©grations legacy. Il est plus verbeux que JSON mais offre des fonctionnalit√©s comme les attributs, espaces de noms et sections CDATA pour les donn√©es complexes. Sp√©cifiez les noms d'√©l√©ments, la structure d'imbrication et o√π utiliser des attributs vs des √©l√©ments enfants.

```
Convertis ces donn√©es en format XML :

Exigences :
- √âl√©ment racine : <catalogue>
- Chaque √©l√©ment dans un √©l√©ment <livre>
- Inclure des attributs o√π appropri√©
- Utiliser CDATA pour le texte de description

Donn√©es : [donn√©es du livre]
```

## Formats Personnalis√©s

Parfois les formats standards ne correspondent pas √† vos besoins. Vous pouvez d√©finir n'importe quel format personnalis√© en fournissant un template clair. Les formats personnalis√©s fonctionnent bien pour les rapports, logs ou sorties sp√©cifiques au domaine qui seront lues par des humains.

### Format d'Analyse Structur√©e

Utilisez des d√©limiteurs (===, ---, [SECTION]) pour cr√©er des documents scannables avec des limites claires entre les sections. Ce format est excellent pour les revues de code, audits et analyses.

```
Analyse ce code en utilisant ce format exact :

=== ANALYSE DU CODE ===

[R√âSUM√â]
Un paragraphe de vue d'ensemble

[PROBL√àMES]
‚Ä¢ CRITIQUE : [probl√®me] ‚Äî [fichier:ligne]
‚Ä¢ AVERTISSEMENT : [probl√®me] ‚Äî [fichier:ligne]  
‚Ä¢ INFO : [probl√®me] ‚Äî [fichier:ligne]

[M√âTRIQUES]
Complexit√© : [Faible/Moyenne/√âlev√©e]
Maintenabilit√© : [score]/10
Couverture de Tests : [% estim√©]

[RECOMMANDATIONS]
1. [Recommandation priorit√© 1]
2. [Recommandation priorit√© 2]

=== FIN ANALYSE ===
```

### Format √† Trous

Les templates avec des blancs (___) guident le mod√®le √† remplir des champs sp√©cifiques tout en maintenant un formatage exact. Cette approche est excellente pour les formulaires, briefs et documents standardis√©s o√π la coh√©rence compte.

```
Compl√®te ce template pour le produit donn√© :

BRIEF PRODUIT
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Nom : _______________
Slogan : _______________
Utilisateur Cible : _______________
Probl√®me R√©solu : _______________
Fonctionnalit√©s Cl√©s :
  1. _______________
  2. _______________
  3. _______________
Diff√©renciateur : _______________

Produit : [description du produit]
```

## R√©ponses Typ√©es

Les r√©ponses typ√©es d√©finissent des cat√©gories ou types d'entit√©s que le mod√®le doit reconna√Ætre et √©tiqueter. Cette technique est essentielle pour la Reconnaissance d'Entit√©s Nomm√©es (NER), les t√¢ches de classification et toute extraction o√π vous devez cat√©goriser l'information de mani√®re coh√©rente. D√©finissez clairement vos types avec des exemples.

<TryIt 
  compact
  title="Extraction d'Entit√©s"
  prompt={`Extrais les entit√©s nomm√©es de ce texte.

Types d'Entit√©s :
- PERSONNE : Noms complets de personnes
- ORG : Noms d'organisations/entreprises
- LIEU : Villes, pays, adresses
- DATE : Dates en format ISO (AAAA-MM-JJ)
- ARGENT : Montants mon√©taires avec devise

Formate chaque entit√© comme : [TYPE] : [valeur]

Texte : "Tim Cook a annonc√© qu'Apple investira 1 milliard de dollars dans une nouvelle installation √† Austin d'ici d√©cembre 2024."`}
/>

## R√©ponses Structur√©es Multi-Parties

Quand vous avez besoin d'une sortie compl√®te couvrant plusieurs aspects, d√©finissez des parties distinctes avec des limites claires. Sp√©cifiez exactement ce qui va dans chaque partie‚Äîformat, longueur et type de contenu. Cela emp√™che le mod√®le de m√©langer les sections ou d'omettre des parties.

```
Recherche ce sujet et fournis :

### PARTIE 1 : R√âSUM√â EX√âCUTIF
[Vue d'ensemble en 2-3 phrases]

### PARTIE 2 : CONCLUSIONS CL√âS
[Exactement 5 points]

### PARTIE 3 : TABLEAU DE DONN√âES
| M√©trique | Valeur | Source |
|----------|--------|--------|
[Inclure minimum 5 lignes]

### PARTIE 4 : RECOMMANDATIONS
[Liste num√©rot√©e de 3 recommandations actionnables]

### PARTIE 5 : LECTURES COMPL√âMENTAIRES
[3 ressources sugg√©r√©es avec br√®ves descriptions]
```

## Formatage Conditionnel

Le formatage conditionnel vous permet de d√©finir diff√©rents formats de sortie bas√©s sur les caract√©ristiques de l'entr√©e. C'est puissant pour la classification, le triage et les syst√®mes de routage o√π le format de r√©ponse doit varier selon ce que le mod√®le d√©tecte. Utilisez une logique si/alors claire avec des templates de sortie explicites pour chaque cas.

<TryIt 
  compact
  title="Classification de Tickets"
  prompt={`Classe ce ticket de support.

Si URGENT (syst√®me down, probl√®me de s√©curit√©, perte de donn√©es) :
  Retourne : üî¥ URGENT | [Cat√©gorie] | [Action Sugg√©r√©e]

Si √âLEV√â (affecte plusieurs utilisateurs, impact sur le revenu) :
  Retourne : üü† √âLEV√â | [Cat√©gorie] | [Action Sugg√©r√©e]

Si MOYEN (un seul utilisateur affect√©, contournement existe) :
  Retourne : üü° MOYEN | [Cat√©gorie] | [Action Sugg√©r√©e]

Si FAIBLE (questions, demandes de fonctionnalit√©s) :
  Retourne : üü¢ FAIBLE | [Cat√©gorie] | [Action Sugg√©r√©e]

Ticket : "Je ne peux pas me connecter √† mon compte. J'ai essay√© de r√©initialiser mon mot de passe deux fois mais j'obtiens toujours une erreur. Cela bloque toute mon √©quipe pour acc√©der au tableau de bord."`}
/>

## Tableaux et Listes en JSON

Extraire plusieurs √©l√©ments dans des tableaux n√©cessite une d√©finition de sch√©ma soign√©e. Sp√©cifiez la structure du tableau, ce que chaque √©l√©ment doit contenir, et comment g√©rer les cas limites (tableaux vides, √©l√©ments uniques). Inclure un champ de comptage aide √† v√©rifier la compl√©tude.

```
Extrais tous les points d'action de cette transcription de r√©union.

Retourne comme tableau JSON :
{
  "points_action": [
    {
      "tache": "string d√©crivant la t√¢che",
      "responsable": "nom de la personne ou 'Non assign√©'",
      "deadline": "date si mentionn√©e, sinon null",
      "priorite": "haute" | "moyenne" | "basse",
      "contexte": "citation pertinente de la transcription"
    }
  ],
  "total_compte": number
}

Transcription : "[transcription de r√©union]"
```

## Instructions de Validation

L'auto-validation demande au mod√®le de v√©rifier sa propre sortie avant de r√©pondre. Cela attrape les probl√®mes courants comme les sections manquantes, le texte placeholder ou les violations de contraintes. Le mod√®le it√©rera en interne pour corriger les probl√®mes, am√©liorant la qualit√© de sortie sans appels API suppl√©mentaires.

```
G√©n√®re le rapport, puis :

CHECKLIST DE VALIDATION :
‚ñ° Toutes les sections requises pr√©sentes
‚ñ° Pas de texte placeholder restant
‚ñ° Toutes les statistiques incluent les sources
‚ñ° Compte de mots entre 500-700 mots
‚ñ° La conclusion fait √©cho √† l'introduction

Si une v√©rification √©choue, corrige avant de r√©pondre.
```

## Gestion des Champs Optionnels

Les donn√©es du monde r√©el ont souvent des valeurs manquantes. Donnez des instructions explicites au mod√®le sur comment g√©rer les champs optionnels‚Äîutiliser `null` est plus propre que des cha√Ænes vides et plus facile √† traiter programmatiquement. Pr√©venez aussi l'¬´ hallucination ¬ª de donn√©es manquantes en soulignant que le mod√®le ne doit jamais inventer d'information.

```
Extrais les informations de contact. Utilise null pour les champs manquants.

{
  "nom": "string (requis)",
  "email": "string ou null",
  "telephone": "string ou null", 
  "entreprise": "string ou null",
  "role": "string ou null",
  "linkedin": "string URL ou null"
}

IMPORTANT : 
- N'invente jamais d'information non pr√©sente dans la source
- Utilise null, pas de cha√Ænes vides, pour les donn√©es manquantes
- Num√©ros de t√©l√©phone en format E.164 si possible
```

## R√©sum√©

<Callout type="tip" title="Techniques Cl√©s">
Soyez explicite sur le format, utilisez des exemples, sp√©cifiez les types, g√©rez les cas limites avec des valeurs null, et demandez au mod√®le de valider sa propre sortie.
</Callout>

<Quiz 
  question="Quel est le principal avantage de la sortie structur√©e par rapport au texte non structur√© ?"
  options={[
    "Elle utilise moins de tokens",
    "C'est plus facile √† g√©n√©rer pour l'IA",
    "Elle peut √™tre analys√©e programmatiquement et valid√©e",
    "Elle produit toujours des informations correctes"
  ]}
  correctIndex={2}
  explanation="Les sorties structur√©es comme JSON peuvent √™tre analys√©es par du code, compar√©es entre requ√™tes, int√©gr√©es dans des workflows et valid√©es pour la compl√©tude‚Äîdes choses difficiles ou impossibles avec du texte libre."
/>

Les sorties structur√©es sont essentielles pour construire des applications aliment√©es par l'IA fiables. Dans le prochain chapitre, nous explorerons le prompting en cha√Æne de pens√©e pour les t√¢ches de raisonnement complexe.
