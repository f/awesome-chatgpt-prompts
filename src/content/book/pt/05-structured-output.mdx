Obter sa√≠da consistente e bem formatada √© essencial para aplica√ß√µes em produ√ß√£o e fluxos de trabalho eficientes. Este cap√≠tulo cobre t√©cnicas para controlar exatamente como os modelos de IA formatam suas respostas.

<Callout type="info" title="De Prosa para Dados">
Sa√≠da estruturada transforma respostas de IA de texto livre em dados acion√°veis e parse√°veis.
</Callout>

## Por Que Estrutura Importa

<StructuredOutputDemo />

## T√©cnicas B√°sicas de Formata√ß√£o

### Listas

Listas s√£o perfeitas para instru√ß√µes passo a passo, itens ranqueados ou cole√ß√µes de pontos relacionados. S√£o f√°ceis de escanear e parsear. Use **listas numeradas** quando ordem importa (passos, rankings) e **marcadores** para cole√ß√µes n√£o ordenadas.

<TryIt 
  compact
  title="Formata√ß√£o de Lista"
  prompt={`Forne√ßa 5 dicas para dormir melhor.

Formato: Lista numerada com breve explica√ß√£o para cada.
Cada dica deve estar em negrito, seguida de um tra√ßo e explica√ß√£o.`}
/>

<Callout type="tip" title="Melhores Pr√°ticas para Listas">
Especifique o n√∫mero exato de itens que voc√™ quer, se deve incluir explica√ß√µes, e se os itens devem estar em negrito ou ter uma estrutura espec√≠fica.
</Callout>

### Tabelas

Tabelas s√£o excelentes para comparar m√∫ltiplos itens nas mesmas dimens√µes. S√£o ideais para compara√ß√µes de recursos, resumos de dados e qualquer informa√ß√£o com atributos consistentes. Sempre defina seus cabe√ßalhos de coluna explicitamente.

<TryIt 
  compact
  title="Formata√ß√£o de Tabela"
  prompt={`Compare os 4 principais frameworks web Python.

Formate como tabela markdown com colunas:
| Framework | Melhor Para | Curva de Aprendizado | Performance |`}
/>

<Callout type="tip" title="Melhores Pr√°ticas para Tabelas">
Especifique nomes das colunas, tipos de dados esperados (texto, n√∫meros, avalia√ß√µes), e quantas linhas voc√™ precisa. Para compara√ß√µes complexas, limite a 4-6 colunas para legibilidade.
</Callout>

### Cabe√ßalhos e Se√ß√µes

Cabe√ßalhos criam uma estrutura clara de documento, tornando respostas longas escane√°veis e organizadas. Use-os para relat√≥rios, an√°lises ou qualquer resposta com m√∫ltiplas partes. Cabe√ßalhos hier√°rquicos (##, ###) mostram relacionamentos entre se√ß√µes.

```
Analise esta proposta de neg√≥cio.

Estruture sua resposta com estas se√ß√µes:
## Resumo Executivo
## Pontos Fortes
## Pontos Fracos
## Recomenda√ß√µes
## Avalia√ß√£o de Riscos
```

<Callout type="tip" title="Melhores Pr√°ticas para Se√ß√µes">
Liste suas se√ß√µes na ordem que voc√™ quer. Para consist√™ncia, especifique o que cada se√ß√£o deve conter (ex: "Resumo Executivo: apenas 2-3 frases").
</Callout>

### √änfase com Diretivas em Mai√∫sculas

Palavras em mai√∫sculas funcionam como sinais fortes para o modelo, enfatizando restri√ß√µes ou requisitos cr√≠ticos. Use-as com modera√ß√£o para m√°ximo impacto‚Äîuso excessivo dilui sua efic√°cia.

**Diretivas Comuns em Mai√∫sculas:**

<InfoGrid items={[
  { label: "NUNCA", description: "Proibi√ß√£o absoluta: \"NUNCA inclua opini√µes pessoais\"", color: "red" },
  { label: "SEMPRE", description: "Requisito obrigat√≥rio: \"SEMPRE cite fontes\"", color: "green" },
  { label: "IMPORTANTE", description: "Instru√ß√£o cr√≠tica: \"IMPORTANTE: Mantenha respostas abaixo de 100 palavras\"", color: "amber" },
  { label: "N√ÉO", description: "Proibi√ß√£o forte: \"N√ÉO invente estat√≠sticas\"", color: "red" },
  { label: "DEVE", description: "A√ß√£o requerida: \"Sa√≠da DEVE ser JSON v√°lido\"", color: "blue" },
  { label: "APENAS", description: "Restri√ß√£o: \"Retorne APENAS o c√≥digo, sem explica√ß√µes\"", color: "purple" },
]} />

```
Resuma este artigo.

IMPORTANTE: Mantenha o resumo abaixo de 100 palavras.
NUNCA adicione informa√ß√£o n√£o presente no original.
SEMPRE mantenha o tom e perspectiva originais.
N√ÉO inclua suas pr√≥prias opini√µes ou an√°lise.
```

<Callout type="warning" title="Use Com Modera√ß√£o">
Se tudo est√° em mai√∫sculas ou marcado como cr√≠tico, nada se destaca. Reserve essas diretivas para restri√ß√µes genuinamente importantes.
</Callout>

## Sa√≠da JSON

JSON (JavaScript Object Notation) √© o formato mais popular para sa√≠da estruturada de IA. √â leg√≠vel por m√°quina, amplamente suportado por linguagens de programa√ß√£o, e perfeito para APIs, bancos de dados e fluxos de trabalho de automa√ß√£o. A chave para JSON confi√°vel √© fornecer um schema claro.

### Requisi√ß√£o JSON B√°sica

Comece com um template mostrando a estrutura exata que voc√™ quer. Inclua nomes de campos, tipos de dados e valores de exemplo. Isso funciona como um contrato que o modelo vai seguir.

<TryIt 
  title="Extra√ß√£o JSON"
  description="Extraia dados estruturados de texto n√£o estruturado."
  prompt={`Extraia informa√ß√µes deste texto e retorne como JSON:

{
    "nome_empresa": "string",
    "ano_fundacao": number,
    "sede": "string",
    "funcionarios": number,
    "industria": "string"
}

Texto: "Apple Inc., fundada em 1976, tem sede em Cupertino, Calif√≥rnia. A gigante de tecnologia emprega aproximadamente 164.000 pessoas em todo o mundo."`}
/>

### Estruturas JSON Complexas

Para dados aninhados, use JSON hier√°rquico com objetos dentro de objetos, arrays de objetos e tipos mistos. Defina cada n√≠vel claramente e use anota√ß√µes estilo TypeScript (`"positive" | "negative"`) para restringir valores.

```
Analise esta avalia√ß√£o de produto e retorne JSON:

{
  "review_id": "string (gere √∫nico)",
  "sentimento": {
    "geral": "positivo" | "negativo" | "misto" | "neutro",
    "score": 0.0-1.0
  },
  "aspectos": [
    {
      "aspecto": "string (ex: 'pre√ßo', 'qualidade')",
      "sentimento": "positivo" | "negativo" | "neutro",
      "mencoes": ["cita√ß√µes exatas da avalia√ß√£o"]
    }
  ],
  "intencao_compra": {
    "recomendaria": boolean,
    "confianca": 0.0-1.0
  },
  "frases_chave": ["array de frases not√°veis"]
}

Retorne APENAS JSON v√°lido, sem texto adicional.

Avalia√ß√£o: "[texto da avalia√ß√£o]"
```

### Garantindo JSON V√°lido

Modelos √†s vezes adicionam texto explicativo ou formata√ß√£o markdown ao redor do JSON. Previna isso com instru√ß√µes expl√≠citas sobre formato de sa√≠da. Voc√™ pode solicitar JSON puro ou JSON dentro de blocos de c√≥digo‚Äîescolha baseado nas suas necessidades de parsing.

Adicione instru√ß√µes expl√≠citas:

```
IMPORTANTE:
- Retorne APENAS o objeto JSON, sem blocos de c√≥digo markdown
- Garanta que todas as strings estejam corretamente escapadas
- Use null para valores ausentes, n√£o undefined
- Valide que a sa√≠da √© JSON parse√°vel
```

Ou solicite blocos de c√≥digo pedindo ao modelo para envolver sua sa√≠da:

````
Retorne o resultado como bloco de c√≥digo JSON:
```json
{ ... }
```
````

## Sa√≠da YAML

YAML √© mais leg√≠vel por humanos que JSON, usando indenta√ß√£o em vez de colchetes. √â o padr√£o para arquivos de configura√ß√£o (Docker, Kubernetes, GitHub Actions) e funciona bem quando a sa√≠da ser√° lida por humanos ou usada em contextos DevOps. YAML √© sens√≠vel a indenta√ß√£o, ent√£o seja espec√≠fico sobre requisitos de formata√ß√£o.

<TryIt 
  compact
  title="Gera√ß√£o YAML"
  prompt={`Gere um workflow do GitHub Actions para um projeto Node.js.

Retorne como YAML v√°lido:
- Inclua: est√°gios de install, lint, test, build
- Use Node.js 18
- Cache de depend√™ncias npm
- Execute em push para main e pull requests`}
/>

## Sa√≠da XML

XML ainda √© necess√°rio para muitos sistemas empresariais, APIs SOAP e integra√ß√µes legadas. √â mais verboso que JSON mas oferece recursos como atributos, namespaces e se√ß√µes CDATA para dados complexos. Especifique nomes de elementos, estrutura de aninhamento e onde usar atributos vs. elementos filhos.

```
Converta estes dados para formato XML:

Requisitos:
- Elemento raiz: <catalogo>
- Cada item em elemento <livro>
- Inclua atributos onde apropriado
- Use CDATA para texto de descri√ß√£o

Dados: [dados do livro]
```

## Formatos Customizados

√Äs vezes formatos padr√£o n√£o atendem suas necessidades. Voc√™ pode definir qualquer formato customizado fornecendo um template claro. Formatos customizados funcionam bem para relat√≥rios, logs ou sa√≠das espec√≠ficas de dom√≠nio que ser√£o lidas por humanos.

### Formato de An√°lise Estruturada

Use delimitadores (===, ---, [SE√á√ÉO]) para criar documentos escane√°veis com limites claros entre se√ß√µes. Este formato √© √≥timo para code reviews, auditorias e an√°lises.

```
Analise este c√≥digo usando este formato exato:

=== AN√ÅLISE DE C√ìDIGO ===

[RESUMO]
Um par√°grafo de vis√£o geral

[PROBLEMAS]
‚Ä¢ CR√çTICO: [problema] ‚Äî [arquivo:linha]
‚Ä¢ ALERTA: [problema] ‚Äî [arquivo:linha]  
‚Ä¢ INFO: [problema] ‚Äî [arquivo:linha]

[M√âTRICAS]
Complexidade: [Baixa/M√©dia/Alta]
Manutenibilidade: [score]/10
Cobertura de Testes: [% estimado]

[RECOMENDA√á√ïES]
1. [Recomenda√ß√£o prioridade 1]
2. [Recomenda√ß√£o prioridade 2]

=== FIM DA AN√ÅLISE ===
```

### Formato de Preencher Lacunas

Templates com lacunas (___) guiam o modelo a preencher campos espec√≠ficos mantendo formata√ß√£o exata. Esta abordagem √© excelente para formul√°rios, briefs e documentos padronizados onde consist√™ncia importa.

```
Complete este template para o produto dado:

BRIEF DO PRODUTO
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Nome: _______________
Tagline: _______________
Usu√°rio Alvo: _______________
Problema Resolvido: _______________
Recursos Principais:
  1. _______________
  2. _______________
  3. _______________
Diferencial: _______________

Produto: [descri√ß√£o do produto]
```

## Respostas Tipadas

Respostas tipadas definem categorias ou tipos de entidade que o modelo deve reconhecer e rotular. Esta t√©cnica √© essencial para Reconhecimento de Entidades Nomeadas (NER), tarefas de classifica√ß√£o e qualquer extra√ß√£o onde voc√™ precisa categorizar informa√ß√£o consistentemente. Defina seus tipos claramente com exemplos.

<TryIt 
  compact
  title="Extra√ß√£o de Entidades"
  prompt={`Extraia entidades deste texto.

Tipos de Entidade:
- PESSOA: Nomes completos de pessoas
- ORG: Nomes de organiza√ß√µes/empresas
- LOCAL: Cidades, pa√≠ses, endere√ßos
- DATA: Datas em formato ISO (AAAA-MM-DD)
- DINHEIRO: Valores monet√°rios com moeda

Formate cada como: [TIPO]: [valor]

Texto: "Tim Cook anunciou que a Apple investir√° $1 bilh√£o em uma nova instala√ß√£o em Austin at√© dezembro de 2024."`}
/>

## Respostas Estruturadas Multi-Partes

Quando voc√™ precisa de sa√≠da abrangente cobrindo m√∫ltiplos aspectos, defina partes distintas com limites claros. Especifique exatamente o que vai em cada parte‚Äîformato, tamanho e tipo de conte√∫do. Isso previne o modelo de misturar se√ß√µes ou omitir partes.

```
Pesquise este t√≥pico e forne√ßa:

### PARTE 1: RESUMO EXECUTIVO
[Vis√£o geral de 2-3 frases]

### PARTE 2: DESCOBERTAS PRINCIPAIS
[Exatamente 5 pontos]

### PARTE 3: TABELA DE DADOS
| M√©trica | Valor | Fonte |
|---------|-------|-------|
[Inclua m√≠nimo 5 linhas]

### PARTE 4: RECOMENDA√á√ïES
[Lista numerada de 3 recomenda√ß√µes acion√°veis]

### PARTE 5: LEITURA ADICIONAL
[3 recursos sugeridos com breves descri√ß√µes]
```

## Formata√ß√£o Condicional

Formata√ß√£o condicional permite definir diferentes formatos de sa√≠da baseados nas caracter√≠sticas da entrada. Isso √© poderoso para classifica√ß√£o, triagem e sistemas de roteamento onde o formato de resposta deve variar baseado no que o modelo detecta. Use l√≥gica if/then clara com templates de sa√≠da expl√≠citos para cada caso.

<TryIt 
  compact
  title="Classifica√ß√£o de Ticket"
  prompt={`Classifique este ticket de suporte.

Se URGENTE (sistema fora, problema de seguran√ßa, perda de dados):
  Retorne: üî¥ URGENTE | [Categoria] | [A√ß√£o Sugerida]

Se ALTO (afeta m√∫ltiplos usu√°rios, impacto de receita):
  Retorne: üü† ALTO | [Categoria] | [A√ß√£o Sugerida]

Se M√âDIO (√∫nico usu√°rio afetado, workaround existe):
  Retorne: üü° M√âDIO | [Categoria] | [A√ß√£o Sugerida]

Se BAIXO (perguntas, solicita√ß√µes de recursos):
  Retorne: üü¢ BAIXO | [Categoria] | [A√ß√£o Sugerida]

Ticket: "N√£o consigo fazer login na minha conta. Tentei resetar minha senha duas vezes mas ainda recebo erro. Isso est√° bloqueando toda minha equipe de acessar o dashboard."`}
/>

## Arrays e Listas em JSON

Extrair m√∫ltiplos itens em arrays requer defini√ß√£o cuidadosa de schema. Especifique a estrutura do array, o que cada item deve conter, e como lidar com casos limite (arrays vazios, itens √∫nicos). Incluir um campo de contagem ajuda a verificar completude.

```
Extraia todos os itens de a√ß√£o desta transcri√ß√£o de reuni√£o.

Retorne como array JSON:
{
  "itens_acao": [
    {
      "tarefa": "string descrevendo a tarefa",
      "responsavel": "nome da pessoa ou 'N√£o Atribu√≠do'",
      "prazo": "data se mencionada, sen√£o null",
      "prioridade": "alta" | "media" | "baixa",
      "contexto": "cita√ß√£o relevante da transcri√ß√£o"
    }
  ],
  "contagem_total": number
}

Transcri√ß√£o: "[transcri√ß√£o da reuni√£o]"
```

## Instru√ß√µes de Valida√ß√£o

Auto-valida√ß√£o instrui o modelo a verificar sua pr√≥pria sa√≠da antes de responder. Isso captura problemas comuns como se√ß√µes faltando, texto placeholder ou viola√ß√µes de restri√ß√µes. O modelo vai iterar internamente para corrigir problemas, melhorando qualidade da sa√≠da sem chamadas de API adicionais.

```
Gere o relat√≥rio, ent√£o:

CHECKLIST DE VALIDA√á√ÉO:
‚ñ° Todas as se√ß√µes requeridas presentes
‚ñ° Nenhum texto placeholder restante
‚ñ° Todas estat√≠sticas incluem fontes
‚ñ° Contagem de palavras entre 500-700
‚ñ° Conclus√£o conecta de volta √† introdu√ß√£o

Se qualquer verifica√ß√£o falhar, corrija antes de responder.
```

## Lidando com Campos Opcionais

Dados do mundo real frequentemente t√™m valores ausentes. Instrua explicitamente o modelo sobre como lidar com campos opcionais‚Äîusar `null` √© mais limpo que strings vazias e mais f√°cil de processar programaticamente. Tamb√©m previna "alucina√ß√£o" de dados faltantes enfatizando que o modelo nunca deve inventar informa√ß√£o.

```
Extraia informa√ß√µes de contato. Use null para campos ausentes.

{
  "nome": "string (obrigat√≥rio)",
  "email": "string ou null",
  "telefone": "string ou null", 
  "empresa": "string ou null",
  "cargo": "string ou null",
  "linkedin": "string URL ou null"
}

IMPORTANTE: 
- Nunca invente informa√ß√£o n√£o presente na fonte
- Use null, n√£o strings vazias, para dados ausentes
- N√∫meros de telefone em formato E.164 se poss√≠vel
```

## Resumo

<Callout type="tip" title="T√©cnicas Principais">
Seja expl√≠cito sobre formato, use exemplos, especifique tipos, lide com casos limite com valores null, e pe√ßa ao modelo para validar sua pr√≥pria sa√≠da.
</Callout>

<Quiz 
  question="Qual √© a principal vantagem de sa√≠da estruturada sobre texto n√£o estruturado?"
  options={[
    "Usa menos tokens",
    "√â mais f√°cil para a IA gerar",
    "Pode ser parseada programaticamente e validada",
    "Sempre produz informa√ß√£o correta"
  ]}
  correctIndex={2}
  explanation="Sa√≠das estruturadas como JSON podem ser parseadas por c√≥digo, comparadas entre consultas, integradas em fluxos de trabalho e validadas para completude‚Äîcoisas que s√£o dif√≠ceis ou imposs√≠veis com texto livre."
/>

Sa√≠das estruturadas s√£o essenciais para construir aplica√ß√µes confi√°veis alimentadas por IA. No pr√≥ximo cap√≠tulo, exploraremos prompting chain-of-thought para tarefas de racioc√≠nio complexo.
